// Generated by CoffeeScript 1.6.3
(function() {
  var portfolioApp, portfolioControllers;

  portfolioApp = angular.module('portfolioApp', ['smoothScroll', 'ngRoute', 'portfolioControllers']);

  /* App Module*/


  portfolioApp.config([
    '$routeProvider', function($routeProvider) {
      return $routeProvider.when('/projects/:projectid', {
        templateUrl: '/partials/project_template.html',
        controller: 'ProjectCtrl'
      }).when('/index', {
        templateUrl: '/partials/index_template.html',
        controller: 'IndexCtrl'
      }).otherwise({
        redirectTo: '/index'
      });
    }
  ]);

  /*portfolioApp.run(['$location','$anchorScroll','$routeParams'($scope, $location, $anchorScroll, $routeParams) ->
    $scope.$on('$routeChangeSuccess', (newRoute,oldRoute) ->
      $location.hash($routeParams.scrollTo)
      $anchorScroll()
    )
  ])
  */


  /* Controllers*/


  portfolioControllers = angular.module('portfolioControllers', []);

  portfolioControllers.controller('ProjectCtrl', [
    '$scope', '$http', '$routeParams', function($scope, $http, $routeParams) {
      $scope.projectid = $routeParams.projectid;
      return $http.get('projects/' + $routeParams.projectid + '/' + $routeParams.projectid + '.json').success(function(data) {
        return $scope.project = data;
      });
    }
  ]);

  portfolioControllers.controller('IndexCtrl', [
    '$scope', '$http', function($scope, $http) {
      $http.get('projects/projects.json').success(function(data) {
        var project, row, _i, _len, _ref, _results;
        $scope.projects = data;
        _ref = $scope.projects;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          row = _ref[_i];
          _results.push((function() {
            var _j, _len1, _results1;
            _results1 = [];
            for (_j = 0, _len1 = row.length; _j < _len1; _j++) {
              project = row[_j];
              _results1.push(project.thumb = 'projects/' + project.id + '/thumb.jpg');
            }
            return _results1;
          })());
        }
        return _results;
      });
    }
  ]);

}).call(this);
